# Advanced CoreSMD CoreDNS Configuration
# This configuration provides DNS resolution with custom zones and TLS support

. {
    coresmd {
        smd_url https://smd.cluster.local
        ca_cert /etc/ssl/certs/smd-ca.crt
        cache_duration 60s
        zone cluster.local {
            nodes nid{04d}
            bmcs bmc-{id}
        }
        zone mgmt.local {
            nodes mgmt{04d}
            bmcs ipmi-{id}
        }
    }
    prometheus 0.0.0.0:9153
    forward . 8.8.8.8
} 